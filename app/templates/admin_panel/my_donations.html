{% extends 'base_painel.html' %}
{% load staticfiles %}

{% block content %}
    {# Example content #}
    <div class="row">
        <div class="col-md-12">
            <div class="box box-primary">
                <!-- form start -->
                <div class="box-header">
                    {#                    <p> Minhas Doações</p>#}
                    <a href="{% url 'add_object' %}" class="btn btn-primary">Cadastrar
                        Doação</a>
                </div>
                <div class="box-body">
                    <div class="dataTables_wrapper form-inline dt-bootstrap"
                         id="example1_wrapper">
                        <div class="row">
                            <div class="col-sm-12" id="list">

                            </div>
                        </div>
                    </div>
                </div>
                {% if user.is_superuser %}
                    <div class="box-footer">
                        <a href="{% url 'painel' %}"
                           class="btn btn-default pull-left">Voltar</a>
                    </div>
                {% endif %}
                <!-- /.box-body -->
            </div>
        </div>
    </div>
    <script type="text/javascript">
        $(document).ready(function () {
            $('#my_objects').addClass('active');
        });

        function getList(data) {
            data = data || {};
            $.ajax({
                url: "/get-my-donations",
                type: "GET", // http method
                data: data,
                beforeSend: function () {
                    $('#loading').show();
                },
                success: function (data) {
                    $('#list').html(data);
                },
                complete: function () {
                    $('#loading').hide();
                }
            });
        }

        getList();

        window.setInterval(function () {
            getList();
        }, 2000);


    </script>
    <!-- /.row -->

{% endblock %}